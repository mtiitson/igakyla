<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Igaküla ajalookaart</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content="Igaküla ajalookaart - vaata kuidas küla nägi välja 1799. ja 1866. aastal. Interaktiivne kaart ajalooliste kaartide ja talukohanimedega."/>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.xn--igakla-6ya.ee/"/>
    <meta property="og:title" content="Igaküla ajalookaart"/>
    <meta property="og:description" content="Igaküla ajalookaart - vaata kuidas küla nägi välja 1799. ja 1866. aastal. Interaktiivne kaart ajalooliste kaartide ja talukohanimedega."/>
    <meta property="og:image" content="https://www.xn--igakla-6ya.ee/preview.png"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="630"/>
    <meta property="og:site_name" content="Igaküla Ajalookaart"/>
    <meta property="og:locale" content="et_EE"/>

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image"/>
    <meta property="twitter:url" content="https://www.xn--igakla-6ya.ee/"/>
    <meta property="twitter:title" content="Igaküla ajalookaart"/>
    <meta property="twitter:description" content="Igaküla ajalookaart - vaata kuidas küla nägi välja 1799. ja 1866. aastal. Interaktiivne kaart ajalooliste kaartide ja talukohanimedega."/>
    <meta property="twitter:image" content="https://www.xn--igakla-6ya.ee/preview.png"/>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v10.6.1/ol.css">
    <style>
        html, body { height: 100%; margin: 0; }
        #map { position: absolute; inset: 0; }
        #ui {
          position: absolute; top: 10px; right: 10px;
          background: rgba(255,255,255,0.95); padding: 12px 15px; border-radius: 8px;
          font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
          box-shadow: 0 2px 10px rgba(0,0,0,0.2);
          backdrop-filter: blur(5px);
          min-width: 200px;
        }
        fieldset { border: 0; margin: 0 0 12px 0; padding: 0; }
        fieldset legend { font-weight: 600; margin-bottom: 6px; color: #333; }
        label {
          display: inline-block;
          margin-right: 15px;
          margin-bottom: 6px;
          cursor: pointer;
        }
        label:last-child { margin-right: 0; }
        .control-group {
          margin-top: 16px;
        }
        .control-group:first-child {
          margin-top: 0;
        }
        .control-group label span {
          font-size: 12px;
          font-weight: 500;
          color: #666;
        }
        input[type="range"] {
          width: 100%;
          vertical-align: middle;
          margin-top: 6px;
          -webkit-appearance: none;
          appearance: none;
          background: #ddd;
          height: 2px;
          border-radius: 1px;
          cursor: pointer;
        }

        input[type="range"]::-webkit-slider-track {
          background: #ddd;
          height: 2px;
          border-radius: 1px;
        }

        input[type="range"]::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
          background: #333;
          height: 16px;
          width: 16px;
          border-radius: 50%;
          cursor: pointer;
        }

        input[type="range"]::-moz-range-track {
          background: #ddd;
          height: 2px;
          border-radius: 1px;
          border: none;
        }

        input[type="range"]::-moz-range-thumb {
          background: #333;
          height: 16px;
          width: 16px;
          border-radius: 50%;
          cursor: pointer;
          border: none;
        }

        /* Style the OpenLayers attribution control */
        .ol-attribution ul {
          line-height: 1.4;
          text-align: left;
        }

        .ol-attribution li {
          display: block !important;
          margin-bottom: 2px;
        }

        .ol-attribution li:last-child {
          margin-bottom: 0;
        }

        /* Footer styling */
        .footer {
          position: absolute;
          bottom: 10px;
          left: 10px;
          padding: 8px 12px;
          border-radius: 6px;
          font-size: 12px;
          color: #ccc;
          text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .footer a {
          color: #ccc;
          text-decoration: none;
          text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .footer a:hover {
          color: #aaa;
        }

        /* Timeline styling */
        .timeline-container {
          position: relative;
          padding: 20px 0 10px 0;
        }

        .timeline-line {
          position: absolute;
          top: 26px; /* Position to go through center of dots */
          left: 0;
          right: 15px;
          height: 2px;
          background: #ddd;
          border-radius: 1px;
        }

        .timeline-markers {
          display: flex;
          justify-content: space-between;
          position: relative;
          z-index: 2;
        }

        .timeline-marker {
          display: flex;
          flex-direction: column;
          align-items: center;
          cursor: pointer;
          margin: 0;
        }

        .timeline-marker input[type="radio"] {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .marker-dot {
          width: 12px;
          height: 12px;
          border-radius: 50%;
          background: #fff;
          border: 2px solid #ddd;
          transition: all 0.2s ease;
          margin-bottom: 8px;
        }

        .timeline-marker:hover .marker-dot {
          border-color: #666;
          transform: scale(1.1);
        }

        .timeline-marker input[type="radio"]:checked + .marker-dot {
          background: #333;
          border-color: #333;
        }

        .marker-label {
          font-size: 12px;
          font-weight: 500;
          color: #666;
          transition: color 0.2s ease;
          white-space: nowrap;
        }

        .timeline-marker input[type="radio"]:checked ~ .marker-label {
          color: #333;
          font-weight: 600;
        }

        .opacity-container {
          width: 100%;
        }

        .opacity-labels {
          display: flex;
          justify-content: space-between;
          font-size: 12px;
          font-weight: 500;
          color: #666;
          margin-top: 4px;
        }
        .extra-layers {
            padding-top: 16px;
        }

        .extra-layers input {
           margin-left: 0;
        }

        /* Popup styling */
        .ol-popup {
          position: absolute;
          background-color: white;
          box-shadow: 0 2px 10px rgba(0,0,0,0.3);
          padding: 15px;
          border-radius: 8px;
          bottom: 12px;
          left: -50px;
          min-width: 280px;
          max-width: 400px;
          font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        }
        .ol-popup:after, .ol-popup:before {
          top: 100%;
          border: solid transparent;
          content: " ";
          height: 0;
          width: 0;
          position: absolute;
          pointer-events: none;
        }
        .ol-popup:after {
          border-top-color: white;
          border-width: 10px;
          left: 48px;
          margin-left: -10px;
        }
        .ol-popup:before {
          border-top-color: rgba(0,0,0,0.1);
          border-width: 11px;
          left: 48px;
          margin-left: -11px;
        }
        .ol-popup-closer {
          text-decoration: none;
          position: absolute;
          top: 10px;
          right: 20px;
          font-size: 20px;
          color: #999;
          cursor: pointer;
        }
        .ol-popup-closer:hover {
          color: #333;
        }
        .popup-content h3 {
          margin: 0 0 10px 0;
          color: #333;
          font-size: 16px;
        }
        .popup-content p {
          margin: 5px 0;
          line-height: 1.5;
        }
        .popup-content strong {
          color: #666;
        }
        .popup-content img {
          width: 100%;
          border-radius: 4px;
          margin-top: 10px;
        }
    </style>
</head>
<body>
<div id="map"></div>

<div id="ui">
    <div class="timeline-container">
        <div class="timeline-line"></div>
        <div class="timeline-markers">
            <label class="timeline-marker" data-year="1799">
                <input type="radio" name="overlay" value="1799" checked>
                <span class="marker-dot"></span>
                <span class="marker-label">1799</span>
            </label>
            <label class="timeline-marker" data-year="1866">
                <input type="radio" name="overlay" value="1866">
                <span class="marker-dot"></span>
                <span class="marker-label">1866</span>
            </label>
            <label class="timeline-marker" data-year="1956">
                <input type="radio" name="overlay" value="1956">
                <span class="marker-dot"></span>
                <span class="marker-label">1956</span>
            </label>
            <label class="timeline-marker" data-year="current">
                <input type="radio" name="overlay" value="current">
                <span class="marker-dot"></span>
                <span class="marker-label" id="current-year">2025</span>
            </label>
        </div>
    </div>
    <div class="control-group" id="opacity-group">
        <div class="opacity-container">
            <input id="opacity" type="range" min="0" max="1" step="0.05" value="1">
            <div class="opacity-labels">
                <span class="opacity-label">0%</span>
                <span class="opacity-label">100%</span>
            </div>
        </div>
    </div>
    <div class="control-group">
        <div class="extra-layers">
            <label style="display: flex; align-items: center; cursor: pointer;">
                <input type="checkbox" id="heritage-sites" style="margin-right: 6px;">
                <span>Pärandkultuuri objektid</span>
            </label>
        </div>
    </div>
</div>

<div class="footer">
    Igaküla 2025 • <a href="#" id="contact-link">Kontakt</a>
</div>

<div id="popup" class="ol-popup">
    <a href="#" id="popup-closer" class="ol-popup-closer">&times;</a>
    <div id="popup-content" class="popup-content"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/openlayers/10.6.1/dist/ol.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.19.10/proj4.min.js"></script>d
<script src="index.js"></script>
</body>
</html>